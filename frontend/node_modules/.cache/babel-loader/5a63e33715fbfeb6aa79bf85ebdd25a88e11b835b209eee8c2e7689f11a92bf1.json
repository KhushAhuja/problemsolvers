{"ast":null,"code":"import _objectSpread from\"C:/Users/HP/Desktop/ps 2/Problem-Solvers/frontend/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import _toConsumableArray from\"C:/Users/HP/Desktop/ps 2/Problem-Solvers/frontend/node_modules/@babel/runtime/helpers/esm/toConsumableArray.js\";import _slicedToArray from\"C:/Users/HP/Desktop/ps 2/Problem-Solvers/frontend/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useState,useEffect}from\"react\";import axios from\"axios\";import\"../App.css\";import Footer from\"../components/footer\";import{useSelector}from\"react-redux\";import{useNavigate}from\"react-router-dom\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";function Forum(){var _useState=useState([]),_useState2=_slicedToArray(_useState,2),posts=_useState2[0],setPosts=_useState2[1];var _useState3=useState({title:\"\",content:\"\",author:\"\"}),_useState4=_slicedToArray(_useState3,2),newPost=_useState4[0],setNewPost=_useState4[1];var _useState5=useState(\"\"),_useState6=_slicedToArray(_useState5,2),replyContent=_useState6[0],setReplyContent=_useState6[1];var _useState7=useState(\"\"),_useState8=_slicedToArray(_useState7,2),replyAuthor=_useState8[0],setReplyAuthor=_useState8[1];var _useState9=useState(false),_useState10=_slicedToArray(_useState9,2),showInputs=_useState10[0],setShowInputs=_useState10[1];var userLogin=useSelector(function(state){return state.userLogin;});var userInfo=userLogin.userInfo;var navigate=useNavigate();useEffect(function(){if(!userInfo){navigate(\"/login\");}},[navigate,userInfo]);useEffect(function(){axios.get(\"/api/posts\").then(function(response){setPosts(response.data);});},[]);var handleButtonClick=function handleButtonClick(){setShowInputs(true);};var addPost=function addPost(){axios.post(\"/api/posts\",newPost).then(function(response){setPosts([].concat(_toConsumableArray(posts),[response.data]));setNewPost({title:\"\",content:\"\",author:\"\"});});};var addReply=function addReply(postId){axios.post(\"/api/posts/\".concat(postId,\"/replies\"),{content:replyContent,author:replyAuthor}).then(function(response){var updatedPosts=posts.map(function(post){return post._id===postId?response.data:post;});setPosts(updatedPosts);setReplyContent(\"\");setReplyAuthor(\"\");});};var scrollToBottom=function scrollToBottom(){window.scrollTo({top:document.documentElement.scrollHeight,behavior:\"smooth\"});};return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"section\",{className:\"gap-x-8 mb-8 mt-4 rounded-lg h-[auto] md:flex-row md:px-0 md:gap-x-16 bg-[#f8f8f8] w-full border border-b-slate-200\",children:/*#__PURE__*/_jsx(\"div\",{className:\"text-center md:w-1/2 w-full h-full mx-auto flex flex-col items-center justify-start md:py-12\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"w-full md:w-[800px] text-center p-4 md:p-2\",children:[/*#__PURE__*/_jsxs(\"h2\",{className:\"text-[#4be3a8] md:font-extrabold font-bold text-3xl md:text-5xl pb-2 text-accent\",children:[\"Get in touch\",\" \",/*#__PURE__*/_jsx(\"span\",{className:\"text-[#242424]\",children:\" to Learn More \"})]}),/*#__PURE__*/_jsx(\"h2\",{className:\"font-light text-2xl hidden md:block md:font-normal text-[#242424]\",children:\"A Place for Productive and Respectful Discussions and Debates. Discover New Ideas and Make Meaningful Connections\"})]})})}),/*#__PURE__*/_jsx(\"div\",{className:\"posts w-[70%]\",children:posts.map(function(post){return/*#__PURE__*/_jsxs(\"div\",{className:\"post px-6 py-4\",children:[/*#__PURE__*/_jsxs(\"h2\",{children:[\"Title: \",post.title]}),/*#__PURE__*/_jsx(\"p\",{children:post.content}),/*#__PURE__*/_jsxs(\"p\",{children:[/*#__PURE__*/_jsxs(\"span\",{children:[\"Author: \",post.author]}),/*#__PURE__*/_jsxs(\"span\",{children:[\"Date: \",new Date(post.date).toLocaleDateString()]})]}),/*#__PURE__*/_jsx(\"ul\",{children:post.replies.map(function(reply,index){return/*#__PURE__*/_jsxs(\"li\",{children:[reply.content,\" - \",reply.author,\" (\",new Date(reply.date).toLocaleDateString(),\")\"]},index);})}),/*#__PURE__*/_jsx(\"div\",{className:\"reply-form\",children:showInputs?/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"input\",{type:\"text\",placeholder:\"Your reply\",value:replyContent,onChange:function onChange(e){return setReplyContent(e.target.value);},className:\"border rounded px-4 py-2 mb-4\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",placeholder:\"Your name\",value:replyAuthor,onChange:function onChange(e){return setReplyAuthor(e.target.value);},className:\"border rounded px-4 py-2 mb-4\"}),/*#__PURE__*/_jsx(\"button\",{onClick:function onClick(){return addReply(post._id);},className:\"bg-blue-500 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded\",children:\"Reply\"})]}):/*#__PURE__*/_jsx(\"button\",{onClick:handleButtonClick,className:\"bg-blue-500 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded\",children:\"Reply\"})})]},post._id);})}),/*#__PURE__*/_jsxs(\"div\",{className:\"new-post-form\",children:[/*#__PURE__*/_jsx(\"h2\",{children:\"New Post\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",placeholder:\"Title\",value:newPost.title,onChange:function onChange(e){return setNewPost(_objectSpread(_objectSpread({},newPost),{},{title:e.target.value}));}}),/*#__PURE__*/_jsx(\"textarea\",{placeholder:\"Content\",value:newPost.content,onChange:function onChange(e){return setNewPost(_objectSpread(_objectSpread({},newPost),{},{content:e.target.value}));}}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",placeholder:\"Your name\",value:newPost.author,onChange:function onChange(e){return setNewPost(_objectSpread(_objectSpread({},newPost),{},{author:e.target.value}));}}),/*#__PURE__*/_jsx(\"button\",{className:\"subm\",onClick:addPost,children:\"Submit\"}),/*#__PURE__*/_jsx(\"button\",{className:\"bg-white rounded-full border border-black px-4 py-2 fixed bottom-6 right-6\",onClick:scrollToBottom,children:/*#__PURE__*/_jsx(\"img\",{src:\"./down.png\",alt:\"\"})})]}),/*#__PURE__*/_jsx(Footer,{})]});}export default Forum;","map":{"version":3,"names":["React","useState","useEffect","axios","Footer","useSelector","useNavigate","Forum","posts","setPosts","title","content","author","newPost","setNewPost","replyContent","setReplyContent","replyAuthor","setReplyAuthor","showInputs","setShowInputs","userLogin","state","userInfo","navigate","get","then","response","data","handleButtonClick","addPost","post","addReply","postId","updatedPosts","map","_id","scrollToBottom","window","scrollTo","top","document","documentElement","scrollHeight","behavior","Date","date","toLocaleDateString","replies","reply","index","e","target","value"],"sources":["C:/Users/HP/Desktop/ps 2/Problem-Solvers/frontend/src/screens/forum.jsx"],"sourcesContent":["import React, { useState, useEffect } from \"react\";\r\nimport axios from \"axios\";\r\nimport \"../App.css\";\r\nimport Footer from \"../components/footer\";\r\nimport { useSelector } from \"react-redux\";\r\nimport { useNavigate} from \"react-router-dom\";\r\n\r\nfunction Forum() {\r\n  const [posts, setPosts] = useState([]);\r\n  const [newPost, setNewPost] = useState({\r\n    title: \"\",\r\n    content: \"\",\r\n    author: \"\",\r\n  });\r\n  const [replyContent, setReplyContent] = useState(\"\");\r\n  const [replyAuthor, setReplyAuthor] = useState(\"\");\r\n  const [showInputs, setShowInputs] = useState(false);\r\n\r\n  const userLogin = useSelector((state) => state.userLogin);\r\n  const { userInfo } = userLogin;\r\n\r\n  let navigate = useNavigate();\r\n\r\n  useEffect(() => {\r\n    if (!userInfo) {\r\n      navigate(\"/login\");\r\n    }\r\n  }, [navigate, userInfo]);\r\n\r\n  useEffect(() => {\r\n    axios.get(\"/api/posts\").then((response) => {\r\n      setPosts(response.data);\r\n    });\r\n  }, []);\r\n\r\n  const handleButtonClick = () => {\r\n    setShowInputs(true);\r\n  };\r\n\r\n  const addPost = () => {\r\n    axios.post(\"/api/posts\", newPost).then((response) => {\r\n      setPosts([...posts, response.data]);\r\n      setNewPost({ title: \"\", content: \"\", author: \"\" });\r\n    });\r\n  };\r\n\r\n  const addReply = (postId) => {\r\n    axios\r\n      .post(`/api/posts/${postId}/replies`, {\r\n        content: replyContent,\r\n        author: replyAuthor,\r\n      })\r\n      .then((response) => {\r\n        const updatedPosts = posts.map((post) =>\r\n          post._id === postId ? response.data : post\r\n        );\r\n        setPosts(updatedPosts);\r\n        setReplyContent(\"\");\r\n        setReplyAuthor(\"\");\r\n      });\r\n  };\r\n  const scrollToBottom = () => {\r\n    window.scrollTo({\r\n      top: document.documentElement.scrollHeight,\r\n      behavior: \"smooth\",\r\n    });\r\n  };\r\n\r\n  return (\r\n    <div>\r\n      <section className=\"gap-x-8 mb-8 mt-4 rounded-lg h-[auto] md:flex-row md:px-0 md:gap-x-16 bg-[#f8f8f8] w-full border border-b-slate-200\">\r\n        <div className=\"text-center md:w-1/2 w-full h-full mx-auto flex flex-col items-center justify-start md:py-12\">\r\n          <div className=\"w-full md:w-[800px] text-center p-4 md:p-2\">\r\n            <h2 className=\"text-[#4be3a8] md:font-extrabold font-bold text-3xl md:text-5xl pb-2 text-accent\">\r\n              Get in touch{\" \"}\r\n              <span className=\"text-[#242424]\"> to Learn More </span>\r\n            </h2>\r\n            <h2 className=\"font-light text-2xl hidden md:block md:font-normal text-[#242424]\">\r\n              A Place for Productive and Respectful Discussions and Debates.\r\n              Discover New Ideas and Make Meaningful Connections\r\n            </h2>\r\n          </div>\r\n        </div>\r\n      </section>\r\n      <div className=\"posts w-[70%]\">\r\n        {posts.map((post) => (\r\n          <div key={post._id} className=\"post px-6 py-4\">\r\n            <h2>Title: {post.title}</h2>\r\n            <p>{post.content}</p>\r\n            <p>\r\n              <span>Author: {post.author}</span>\r\n              <span>Date: {new Date(post.date).toLocaleDateString()}</span>\r\n            </p>\r\n            <ul>\r\n              {/* <h5>Replies</h5> */}\r\n              {post.replies.map((reply, index) => (\r\n                <li key={index}>\r\n                  {reply.content} - {reply.author} (\r\n                  {new Date(reply.date).toLocaleDateString()})\r\n                </li>\r\n              ))}\r\n            </ul>\r\n            <div className=\"reply-form\">\r\n              {showInputs ? (\r\n                <>\r\n                  <input\r\n                    type=\"text\"\r\n                    placeholder=\"Your reply\"\r\n                    value={replyContent}\r\n                    onChange={(e) => setReplyContent(e.target.value)}\r\n                    className=\"border rounded px-4 py-2 mb-4\"\r\n                  />\r\n\r\n                  <input\r\n                    type=\"text\"\r\n                    placeholder=\"Your name\"\r\n                    value={replyAuthor}\r\n                    onChange={(e) => setReplyAuthor(e.target.value)}\r\n                    className=\"border rounded px-4 py-2 mb-4\"\r\n                  />\r\n\r\n                  <button\r\n                    onClick={() => addReply(post._id)}\r\n                    className=\"bg-blue-500 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded\"\r\n                  >\r\n                    Reply\r\n                  </button>\r\n                </>\r\n              ) : (\r\n                <button\r\n                  onClick={handleButtonClick}\r\n                  className=\"bg-blue-500 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded\"\r\n                >\r\n                  Reply\r\n                </button>\r\n              )}\r\n            </div>\r\n          </div>\r\n        ))}\r\n      </div>\r\n      <div className=\"new-post-form\">\r\n        <h2>New Post</h2>\r\n        <input\r\n          type=\"text\"\r\n          placeholder=\"Title\"\r\n          value={newPost.title}\r\n          onChange={(e) => setNewPost({ ...newPost, title: e.target.value })}\r\n        />\r\n        <textarea\r\n          placeholder=\"Content\"\r\n          value={newPost.content}\r\n          onChange={(e) => setNewPost({ ...newPost, content: e.target.value })}\r\n        ></textarea>\r\n        <input\r\n          type=\"text\"\r\n          placeholder=\"Your name\"\r\n          value={newPost.author}\r\n          onChange={(e) => setNewPost({ ...newPost, author: e.target.value })}\r\n        />\r\n        <button className=\"subm\" onClick={addPost}>\r\n          Submit\r\n        </button>\r\n        <button\r\n          className=\"bg-white rounded-full border border-black px-4 py-2 fixed bottom-6 right-6\"\r\n          onClick={scrollToBottom}\r\n        >\r\n          <img src=\"./down.png\" alt=\"\" />\r\n        </button>\r\n      </div>\r\n      <Footer />\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default Forum;\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}